"use strict";const formTitles=document.querySelectorAll(".js-form-title1"),paletteSection=document.querySelector(".js-form-palette"),fillSection=document.querySelector(".js-form-fill"),cardSection=document.querySelector(".js-form-card"),arrowsUp=document.querySelectorAll(".js-arrow-up"),btnCreated=document.querySelector(".js-button-created"),cardTwitter=document.querySelector(".js-card");function hiddenSection(e){const t=e.target.id;1==t?(paletteSection.classList.toggle("hidden"),fillSection.classList.add("hidden"),cardSection.classList.add("hidden"),arrowsUp[0].classList.toggle("icon-up-move")):2==t?(fillSection.classList.toggle("hidden"),paletteSection.classList.add("hidden"),cardSection.classList.add("hidden"),arrowsUp[1].classList.toggle("icon-up-move")):3==t&&(cardSection.classList.toggle("hidden"),paletteSection.classList.add("hidden"),fillSection.classList.add("hidden"),arrowsUp[2].classList.toggle("icon-up-move"))}paletteSection.classList.add("hidden"),fillSection.classList.add("hidden"),cardSection.classList.add("hidden");for(const e of formTitles)e.addEventListener("click",hiddenSection);function addAppearTwitter(){cardTwitter.classList.remove("card__hidden"),btnCreated.classList.add("create-card__color"),btnCreated.classList.remove("hover")}btnCreated.addEventListener("click",addAppearTwitter);const palette=["green","red","random"],paletteColors=document.querySelector(".js-palettes"),card=document.querySelector(".main__photo"),paintPalettes=()=>{for(let e=0;e<palette.length;e++)paletteColors.innerHTML+=`<div class="design__palette-color">\n  <input id=${palette[e]} class="palettes js-palette" type="radio" name="palette" value="${e+1}" ${0===e?"checked":""}/>\n  <span class="box-color ${palette[e]}__1"></span> \n  <span class="box-color ${palette[e]}__2"></span>\n  <span class="box-color ${palette[e]}__3"></span>\n  </div>\n  `};paintPalettes();const radioButtonList=document.querySelectorAll(".js-palette");for(let e=0;e<radioButtonList.length;e++)radioButtonList[e].addEventListener("click",handleRadioButtonCLick);let buttonPossition=1;function handleRadioButtonCLick(e){dataValue.palette=e.currentTarget.value,buttonPossition=e.currentTarget.id,localStorage.setItem("dataFrom",JSON.stringify(dataValue)),renderPreview()}const iconPhone=document.querySelector(".js-icon-phone"),iconMail=document.querySelector(".js-icon-mail"),iconLinkedin=document.querySelector(".js-icon-linkedin"),iconGithub=document.querySelector(".js-icon-github"),fillData=document.querySelectorAll(".js-fill");let dataValue={palette:1,name:"Nombre Apellido",job:"Front-end developer",email:"",phone:"",linkedin:"",github:"",photo:"./assets/images/MM.jpg"};const fillDataValue=function(e){dataValue[e.currentTarget.id]=e.currentTarget.value,localStorage.setItem("dataFrom",JSON.stringify(dataValue)),renderPreview()};function getLocalStorage(){const e=localStorage.getItem("dataFrom");e&&(dataValue=JSON.parse(e),renderPreview())}function renderPreview(){const e=document.querySelector(".js-card-container");e.classList.remove("js-green","js-red","js-random"),"1"===dataValue.palette&&e.classList.add("js-green"),"2"===dataValue.palette&&e.classList.add("js-red"),"3"===dataValue.palette&&e.classList.add("js-random"),name.innerHTML=dataValue.name,job.innerHTML=dataValue.job,iconPhone.href="tel:+34"+dataValue.phone,iconMail.href="mailto:"+dataValue.email,iconLinkedin.href=dataValue.linkedin,iconGithub.href=dataValue.github,fillData[0].value=dataValue.name,fillData[1].value=dataValue.job,fillData[2].value=dataValue.email,fillData[3].value=dataValue.phone,fillData[4].value=dataValue.linkedin,fillData[5].value=dataValue.github,radioButtonList[dataValue.palette-1].checked=!0,profileImage.style.backgroundImage=`url(${dataValue.photo})`}for(const e of fillData)e.addEventListener("change",fillDataValue);const fr=new FileReader,uploadBtn=document.querySelector(".js__profile-trigger"),fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,dataValue.photo=fr.result,localStorage.setItem("dataFrom",JSON.stringify(dataValue)),renderPreview()}function fakeFileClick(){fileField.click()}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);const reset=document.querySelector(".js-reset"),name=document.querySelector(".js-name"),job=document.querySelector(".js-job"),image=document.querySelector(".js__profile-image"),miniImage=document.querySelector(".js__profile-preview"),social=document.querySelectorAll(".js-social");function resetData(){name.innerHTML="Nombre Apellido",job.innerHTML="Front-end developer",image.style="background-image: url('./assets/images/MM.jpg')",miniImage.style="",radioButtonList[0].checked=!0;for(let e of social)e.href="";for(let e of fillData)e.value="";dataValue.palette=1;const e=document.querySelector(".js-card-container");e.classList.remove("js-green","js-red","js-random"),e.classList.add("js-green"),localStorage.clear()}reset.addEventListener("click",resetData),getLocalStorage();const responseURL=document.querySelector(".js-card-link"),buttonTwitter=document.querySelector(".js-button-twitter");function createCard(e){e.preventDefault(),fetch("https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",{method:"POST",body:JSON.stringify(dataValue),headers:{"Content-type":"application/json"}}).then(e=>e.json()).then(e=>getURL(e)).catch(e=>console.error("Error:",e))}function getURL(e){if(e.success){responseURL.innerHTML=`<a target="_blank" href="${e.cardURL}">AquÃ­ tienes tu tarjeta</a>`;const t="Â¡Hola! Un DIAMANTE es solo un trozo de carbÃ³n que soportÃ³ una presiÃ³n extraordinaria! Para mostrarlo al mundo, las < Div_as> me han ayudado a hacer esta tarjeta ðŸ’Ž";buttonTwitter.setAttribute("href",`https://twitter.com/intent/tweet?text=${t}&url=${e.cardURL}`)}else responseURL.innerHTML="ERROR: "+e.error}btnCreated.addEventListener("click",createCard);